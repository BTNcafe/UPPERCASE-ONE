global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(e,o,n){"use strict";var t,r,a,c,l,E=void 0===o.host?global.location.hostname:E,i=o.fixServerPort,u=o.flashPolicyServerPort,s={};CHECK_IS_DATA(n)!==!0?t=n:(t=n.success,r=n.error),l=function(e,o){var n=s[e];void 0!==n&&EACH(n,function(e){e(o,function(){REMOVE({data:n,value:e})})})},a=io.connect(E,{port:i,"flash policy port":u,transports:["flashsocket","xhr-polling","jsonp-polling"],secure:!1,reconnect:!1,"connect timeout":5e3}),a.on("connect",function(){c=!0,t(function(e,o){var n=s[e];void 0===n&&(n=s[e]=[]),n.push(o)},function(e){a.send(STRINGIFY(e))})}),a.on("message",function(e){var o=PARSE_STR(e);void 0!==o&&l(o.methodName,o.data)}),a.on("disconnect",function(){l("__DISCONNECTED")}),a.on("error",function(e){l("__ERROR",e)}),DELAY(6,function(){var e,o;c!==!0&&(e="ws://"+E+":"+i+"/",o={path:{length:0},cancelBubble:!1,returnValue:!0,srcElement:{binaryType:"blob",extensions:"",protocol:"",bufferedAmount:0,readyState:3,url:e,URL:e},defaultPrevented:!1,timeStamp:1402844597826,cancelable:!1,bubbles:!1,eventPhase:2,currentTarget:{binaryType:"blob",extensions:"",protocol:"",bufferedAmount:0,readyState:3,url:e,URL:e},target:{binaryType:"blob",extensions:"",protocol:"",bufferedAmount:0,readyState:3,url:e,URL:e},type:"error"},console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED:",o),void 0!==r&&r(o))})}});