global.CONNECT_TO_WEB_SOCKET_SERVER=CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,E,n){"use strict";var t,_,C,a,c,e=void 0===E.host?global.location.hostname:e,i=E.port,O={};CHECK_IS_DATA(n)!==!0?t=n:(t=n.success,_=n.error),c=function(o,E){var n=O[o];void 0!==n&&EACH(n,function(o){o(E,function(){REMOVE({data:n,value:o})})})},C=new WebSocket("ws://"+e+":"+i),C.onopen=function(){a=!0,t(function(o,E){var n=O[o];void 0===n&&(n=O[o]=[]),n.push(E)},function(o){C.send(STRINGIFY(o))})},C.onmessage=function(o){var E=PARSE_STR(o.data);void 0!==E&&c(E.methodName,E.data)},C.onclose=function(){c("__DISCONNECTED")},C.onerror=function(o){a!==!0?(console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED:",o),void 0!==_&&_(o)):c("__ERROR",o)}}});